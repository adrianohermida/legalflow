/* Cache-busting: v5.0 - FIXED BRAND COLORS - Precise yellow prevention */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap");
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Tokens globais para eliminar amarelo e garantir branding */
:root {
  /* Brand - tokens principais */
  --brand-900: #1b3a2f;
  --brand-700: #285245;
  --brand-100: #e9f3ef;

  /* Semânticas */
  --surface: #ffffff;
  --surface-2: #f7f9f8; /* leve cinza-esverdeado */
  --on-surface: #0f1b17; /* texto principal */
  --muted: #6c7a73; /* texto secundário */

  /* Status */
  --danger: #ef4444;
  --warn: #d97706;
  --success: #16a34a;

  /* Acessibilidade */
  --focus-ring: 2px solid #285245; /* brand-700 */
}

@media (prefers-color-scheme: dark) {
  :root {
    --surface: #101513;
    --surface-2: #0c100e;
    --on-surface: #e7ece9;
    --muted: #98a6a0;
  }
}

/* Reset de overlays/amarelo indevido */
body,
[data-app-root],
.app-bg,
.page-container,
.main-content,
.app-container {
  background: var(--surface) !important;
}

/* FORÇA ELIMINAÇÃO TOTAL DE AMARELO - Sistema anti-yellow */
* {
  background-color: inherit;
}

/* Elimina qualquer amarelo/orange não-brand */
*[style*="yellow"],
*[style*="#ff0"],
*[style*="#ffa"],
*[style*="#ffb"],
*[style*="#ffc"],
*[style*="#ffd"],
*[style*="#ffe"],
*[style*="#fff0"],
*[style*="rgb(255,255"],
*[style*="rgb(255, 255"],
*[class*="yellow"],
*[class*="amber"],
*[class*="orange-4"],
*[class*="orange-5"],
.bg-yellow-50,
.bg-yellow-100,
.bg-yellow-200,
.bg-yellow-300,
.bg-yellow-400,
.bg-yellow-500,
.text-yellow-500,
.text-yellow-600,
.text-orange-400,
.text-orange-500,
*[style*="background-color: yellow"],
*[style*="background: yellow"] {
  background: var(--surface) !important;
  color: var(--on-surface) !important;
}

/* Força aplicação de brand em override de qualquer amarelo */
body,
html,
#root,
[data-app-root] {
  background: var(--surface) !important;
  color: var(--on-surface) !important;
}

/* Elimina amarelo específico de componentes */
.app-bg,
.page-bg,
.main-bg,
.dashboard-bg,
.container-bg {
  background: var(--surface) !important;
}

/* Focus visível */
:focus-visible {
  outline: var(--focus-ring);
  outline-offset: 2px;
}

@layer base {
  :root {
    /* F1.0 - Hermida Maia Brand Colors (padronização site ↔ app) */
    --brand-50: 245 250 248;
    --brand-100: 233 243 239; /* #e9f3ef - Primary light */
    --brand-200: 211 231 223;
    --brand-300: 176 212 196;
    --brand-400: 134 189 164;
    --brand-500: 98 162 133;
    --brand-600: 77 129 105;
    --brand-700: 40 82 69; /* #285245 - Primary medium */
    --brand-800: 33 66 57;
    --brand-900: 27 58 47; /* #1b3a2f - Primary dark */

    /* State colors - brand-aligned */
    --danger: 239 68 68; /* #ef4444 */
    --warn: 217 119 6; /* #d97706 - More muted amber */
    --success: 22 163 74; /* #16a34a */

    /* Neutral scale baseada no branding */
    --neutral-50: 249 250 251;
    --neutral-100: 243 244 246;
    --neutral-200: 229 231 235;
    --neutral-300: 209 213 219;
    --neutral-400: 156 163 175;
    --neutral-500: 107 114 128;
    --neutral-600: 75 85 99;
    --neutral-700: 55 65 81;
    --neutral-800: 31 41 55;
    --neutral-900: 17 24 39;

    /* F1.0 - Shadcn/UI Variables - AA+ contrast compliant */
    --background: 255 255 255;
    --foreground: var(--brand-900);
    --card: 255 255 255;
    --card-foreground: var(--brand-900);
    --popover: 255 255 255;
    --popover-foreground: var(--brand-900);
    --primary: var(--brand-700);
    --primary-foreground: 255 255 255;
    --secondary: var(--brand-100);
    --secondary-foreground: var(--brand-900);
    --muted: var(--neutral-50);
    --muted-foreground: var(--neutral-600);
    --accent: var(--brand-100);
    --accent-foreground: var(--brand-900);
    --destructive: var(--danger);
    --destructive-foreground: 255 255 255;
    --border: var(--neutral-200);
    --input: var(--neutral-200);
    --ring: var(--brand-700);
    --radius: 0.75rem; /* 12px bordas arredondadas */
  }

  .dark {
    --background: var(--brand-900);
    --foreground: var(--brand-100);
    --card: var(--brand-800);
    --card-foreground: var(--brand-100);
    --popover: var(--brand-800);
    --popover-foreground: var(--brand-100);
    --primary: var(--brand-700);
    --primary-foreground: 255 255 255;
    --secondary: var(--brand-800);
    --secondary-foreground: var(--brand-100);
    --muted: var(--brand-800);
    --muted-foreground: var(--brand-400);
    --accent: var(--brand-800);
    --accent-foreground: var(--brand-100);
    --border: var(--brand-700);
    --input: var(--brand-700);
    --ring: var(--brand-500);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-sans;
    /* F1.0 - Line-height confortável */
    line-height: 1.7;
    font-feature-settings:
      "rlig" 1,
      "calt" 1;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* F1.0 - Títulos com fonte heading e line-height apropriado */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-heading;
    line-height: 1.4;
  }

  /* F1.0 - Focus ring visível para acessibilidade AA+ */
  *:focus-visible {
    @apply outline-none ring-2 ring-brand-700 ring-offset-2 ring-offset-background;
  }

  /* Ensure buttons have proper brand styling */
  button:focus-visible,
  [role="button"]:focus-visible {
    @apply ring-brand-700 ring-offset-background;
  }

  /* F1.0 - Elementos interativos com transições suaves */
  .interactive {
    @apply transition-all duration-200 ease-out;
  }

  .interactive:hover {
    @apply shadow-soft;
  }

  .interactive:active {
    @apply scale-[0.98];
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-muted;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-muted-foreground/30 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-muted-foreground/50;
  }
}

@layer components {
  /* App Shell Layout */
  .app-shell {
    @apply min-h-screen bg-background flex;
  }

  .app-sidebar {
    @apply w-sidebar bg-card border-r border-border flex-shrink-0;
  }

  .app-main {
    @apply flex-1 flex flex-col min-w-0;
  }

  .app-header {
    @apply h-header bg-card border-b border-border flex items-center px-6;
  }

  .app-content {
    @apply flex-1 overflow-auto;
  }

  /* Logo styles */
  .logo-hermida {
    @apply font-heading font-semibold text-brand-700;
  }

  /* Button variants */
  .btn-brand {
    @apply bg-brand-700 text-white hover:bg-brand-900 focus:ring-brand-700;
  }

  .btn-brand-outline {
    @apply border-brand-700 text-brand-700 hover:bg-brand-100 focus:ring-brand-700;
  }

  /* Status badges */
  .badge-success {
    @apply bg-success-100 text-success-700 border-success-200;
  }

  .badge-warning {
    @apply bg-warning-100 text-warning-700 border-warning-200;
  }

  .badge-danger {
    @apply bg-danger-100 text-danger-700 border-danger-200;
  }

  /* Animation utilities */
  .animate-fade-in {
    animation: fade-in 0.15s ease-out;
  }

  .animate-slide-in-right {
    animation: slide-in-right 0.2s ease-out;
  }
}

@layer utilities {
  /* Screen reader utilities */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  .focus\\:not-sr-only:focus {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }

  /* Text overflow utilities */
  .text-ellipsis-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .text-ellipsis-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Interactive states */
  .interactive {
    @apply transition-colors duration-150 ease-in-out;
  }

  .interactive:hover {
    @apply bg-accent;
  }

  .interactive:active {
    @apply bg-accent/80;
  }

  /* Custom shadows */
  .shadow-soft {
    box-shadow: 0 2px 8px 0 rgba(27, 58, 47, 0.08);
  }

  .shadow-medium {
    box-shadow: 0 4px 16px 0 rgba(27, 58, 47, 0.12);
  }

  .shadow-strong {
    box-shadow: 0 8px 24px 0 rgba(27, 58, 47, 0.16);
  }

  /* Componentes base - eliminar amarelo e aplicar brand tokens */

  /* Button (primário) */
  .btn-primary,
  button[data-variant="primary"] {
    background: var(--brand-700);
    color: #fff;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(27, 58, 47, 0.15);
  }
  .btn-primary:hover {
    background: var(--brand-900);
  }
  .btn-outline {
    border: 1px solid var(--brand-700);
    color: var(--brand-700);
  }
  .btn-outline:hover {
    background: var(--brand-100);
  }

  /* Input */
  input,
  textarea,
  select {
    background: var(--surface);
    border: 1px solid color-mix(in srgb, var(--brand-700) 20%, #cfd8d5 80%);
    color: var(--on-surface);
    border-radius: 10px;
  }
  input:focus,
  textarea:focus,
  select:focus {
    outline: var(--focus-ring);
  }

  /* Table */
  .table thead th {
    background: var(--brand-100);
    color: var(--brand-900);
  }
  .table tbody tr {
    background: var(--surface);
  }
  .table tbody tr:nth-child(even) {
    background: var(--surface-2);
  }

  /* Badge */
  .badge,
  [data-ui="badge"] {
    border-radius: 999px;
    padding: 2px 8px;
    font-weight: 600;
  }
  .badge--brand {
    background: var(--brand-100);
    color: var(--brand-900);
  }
  .badge--danger {
    background: color-mix(in srgb, var(--danger) 15%, #fff 85%);
    color: var(--danger);
  }
  .badge--warn {
    background: color-mix(in srgb, var(--warn) 15%, #fff 85%);
    color: var(--warn);
  }
  .badge--success {
    background: color-mix(in srgb, var(--success) 15%, #fff 85%);
    color: var(--success);
  }

  /* Tooltip */
  .tooltip,
  [data-ui="tooltip"] {
    background: var(--brand-900);
    color: #fff;
    border-radius: 10px;
    box-shadow: 0 6px 24px rgba(27, 58, 47, 0.22);
  }

  /* Command-K / Busca Global - remoção do amarelo */
  .commandk,
  .cmdk-overlay,
  .search-palette {
    background: var(--surface) !important;
    color: var(--on-surface);
    border: 1px solid color-mix(in srgb, var(--brand-700) 18%, #cfd8d5 82%);
    border-radius: 14px;
    box-shadow: 0 12px 32px rgba(27, 58, 47, 0.18);
  }
  .commandk .tab-active {
    color: var(--brand-900);
    border-bottom: 2px solid var(--brand-700);
  }
  .commandk .item:hover,
  .commandk .item[aria-selected="true"] {
    background: var(--brand-100);
  }
  .commandk .hint {
    color: var(--muted);
  }

  /* Tipografia e raios universais */
  html,
  body {
    font-family:
      Inter,
      system-ui,
      -apple-system,
      Segoe UI,
      Roboto,
      "Open Sans",
      Arial,
      sans-serif;
  }
  h1,
  h2,
  h3 {
    font-family: Montserrat, Inter, sans-serif;
    line-height: 1.2;
  }
  .card,
  .panel,
  .modal,
  .dropdown {
    border-radius: 12px;
    background: var(--surface);
  }
}

/* Print styles */
@media print {
  .no-print {
    display: none !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  :root {
    --ring: var(--brand-900);
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
